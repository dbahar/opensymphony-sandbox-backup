<beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"       xmlns:aop="http://www.springframework.org/schema/aop"       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop.xsd"       default-autowire="byType">    <!-- project services -->    <bean id="userService" class="com.opensymphony.able.service.UserService" autowire="constructor"/>    <!-- infrastructure services -->    <!-- Upgrades the database schema as needed -->    <bean id="upgrade" class="com.opensymphony.able.service.UpgradeService"            lazy-init="false" init-method="init" autowire="byType">        <property name="dataSource" ref="dataSource"/>    </bean>    <bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">        <property name="persistenceXmlLocation" value="classpath:/META-INF/persistence.xml"/>        <property name="dataSource" ref="dataSource"/>        <property name="jpaVendorAdapter">            <bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter">                <property name="database" value="HSQL"/>                <property name="showSql" value="true"/>                <property name="generateDdl" value="true"/>            </bean>        </property>        <property name="jpaPropertyMap">            <props>                <prop key="hibernate.cache.provider_class">org.hibernate.cache.HashtableCacheProvider</prop>            </props>        </property>    </bean>    <bean id="jpaTemplate" class="org.springframework.orm.jpa.JpaTemplate" scope="prototype">         <!-- depends-on="compass" -->        <property name="entityManagerFactory" ref="entityManagerFactory"/>        <property name="exposeNativeEntityManager" value="true"/>    </bean>    <bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager">        <property name="entityManagerFactory" ref="entityManagerFactory"/>    </bean>    <bean id="transactionTemplate" class="org.springframework.transaction.support.TransactionTemplate"          scope="prototype">        <property name="transactionManager" ref="transactionManager"/>    </bean>    <!-- Compass    <bean id="compassTemplate" class="org.compass.core.CompassTemplate" autowire="constructor"/>    <bean id="compass" class="org.compass.spring.LocalCompassBean">      <property name="resourceLocations">        <list>          <value>classpath:com/opensymphony/able/model/user.cmd.xml</value>          <value>classpath:user.cpm.xml</value>        </list>      </property>      <property name="compassSettings">        <props>          <prop key="compass.engine.connection">file://target/testindex</prop>          <prop key="compass.transaction.factory">org.compass.spring.transaction.SpringSyncTransactionFactory</prop>        </props>      </property>      <property name="transactionManager" ref="transactionManager"/>    </bean>    <bean id="jpaGpsDevice" class="com.opensymphony.able.compass.AbleJpaGpsDevice">      <constructor-arg index="0" value="default"/>      <constructor-arg index="1" ref="entityManagerFactory"/>      <property name="injectEntityLifecycleListener" value="true"/>      <property name="mirrorDataChanges" value="true"/>    </bean>    <bean id="jpaGps" class="org.compass.gps.impl.SingleCompassGps" init-method="start" destroy-method="stop">      <property name="compass" ref="compass"/>      <property name="gpsDevices">        <list>          <bean class="org.compass.spring.device.SpringSyncTransactionGpsDeviceWrapper">            <property name="gpsDevice" ref="jpaGpsDevice"/>            <property name="name" value="default"/>          </bean>        </list>      </property>    </bean>    <bean id="queryStrategy" class="com.opensymphony.able.compass.CompassQueryStrategy" autowire="constructor"/>     -->  <!-- lets use a stub until we add back Compass support -->  <bean id="queryStrategy" class="com.opensymphony.able.action.StubQueryStrategy" autowire="constructor"/>  <bean id="validator" class="com.opensymphony.able.validation.hibernate.HibernateValidator" autowire="constructor"/></beans>